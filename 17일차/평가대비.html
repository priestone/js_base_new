<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>평가대비</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="wrap">

        <div class="con">

            <div class="user_info">
                <div class="avatar"></div>
                <div class="username">test username</div>
            </div>
            <div class="bg"></div>
            <div class="bottom_wrap">
                <div class="heart">
                    <i class="fa-regular fa-heart" ></i>
                </div>
                <form>
                    <input type="text" placeholder="댓글을 입력해주세요.">
                </form>
                <div class="comment"></div>
            </div>
    
        </div>

    </div>

    <script>

        const formEl = document.querySelector(`form`);
        const inputEl = document.querySelector(`input`);
        const commentEl = document.querySelector(`.comment`);
        let review = 0;
        const inputValue = inputEl.value;


        const getComment = localStorage.getItem(String(review));

        const loadComments = () => {
            for(let i = 0; i <localStorage.length; i++){
                const saveComment = localStorage.getItem(localStorage.key(i));
                const pEl = document.createElement(`p`);
                pEl.innerText = saveComment;
                commentEl.append(pEl);
            }
        }


        
        const handleSubmit = (e) => {
            e.preventDefault();
            
            const inputValue = inputEl.value;
            
            localStorage.setItem(String(review), inputValue);
            const getComment = localStorage.getItem(String(review));

            if(inputValue.length > 0){
                review ++;
                const pEl = document.createElement(`p`);
                commentEl.append(pEl);
                pEl.innerText = getComment;
                inputEl.value = "";
            }
            
        }

        loadComments();
        
        formEl.addEventListener(`submit`, handleSubmit);

    </script>
    
</body>
</html>